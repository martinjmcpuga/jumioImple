{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/martin/git/jumioImple/node_modules/%40jumio/websdk/profiler.DLk5YRbt.js"],"sourcesContent":["import { R as z, a as H, c as K, s as q, b as Q, d as m, e as I, f as W, m as v, h as X, i as Y, j as Z, k as $, l as x, r as ee } from \"./index.DNVKyBAJ.js\";\nfunction te(t) {\n  let n = 0;\n  for (const i of t)\n    i.stackId !== void 0 && n++;\n  return n;\n}\nconst b = /* @__PURE__ */ new Map();\nfunction ne(t, n) {\n  b.set(n, t);\n}\nfunction se(t) {\n  return b.get(t);\n}\nfunction O(t) {\n  for (const n of b.keys())\n    n < t && b.delete(n);\n}\nfunction re({ rawRumEvent: t, startTime: n }) {\n  if (t.type !== z.LONG_TASK)\n    return;\n  const i = t.long_task.id;\n  ne(i, n);\n}\nconst oe = (t, n, i, r) => {\n  const l = ae(t, n, i, r), f = le(t, l), c = n.build(\"fetch\", f);\n  return H(\"Sending profile to public profiling intake\", { profilingIntakeURL: c, applicationId: i, sessionId: r }), fetch(c, {\n    body: f.data,\n    method: \"POST\"\n  });\n};\nfunction ae(t, n, i, r) {\n  const l = n.tags, f = ce(t, i, r), c = ie(l);\n  return {\n    ...f,\n    attachments: [\"wall-time.json\"],\n    start: new Date(t.startClocks.timeStamp).toISOString(),\n    end: new Date(t.endClocks.timeStamp).toISOString(),\n    family: \"chrome\",\n    runtime: \"chrome\",\n    format: \"json\",\n    version: 4,\n    // Ingestion event version (not the version application tag)\n    tags_profiler: c.join(\",\"),\n    _dd: {\n      clock_drift: K()\n    }\n  };\n}\nfunction ie(t) {\n  return t.concat([\"language:javascript\", \"runtime:chrome\", \"family:chrome\", \"host:browser\"]);\n}\nfunction le(t, n) {\n  const i = new Blob([JSON.stringify(t)], {\n    type: \"application/json\"\n  }), r = new FormData();\n  return r.append(\"event\", new Blob([JSON.stringify(n)], { type: \"application/json\" }), \"event.json\"), r.append(\"wall-time.json\", i, \"wall-time.json\"), { data: r, bytesCount: 0 };\n}\nfunction ce(t, n, i) {\n  const r = {\n    application: {\n      id: n\n    }\n  };\n  i && (r.session = {\n    id: i\n  });\n  const l = Array.from(new Set(t.views.map((c) => c.viewId)));\n  l.length && (r.view = {\n    id: l\n  });\n  const f = t.longTasks.map((c) => c.id).filter((c) => c !== void 0);\n  return f.length && (r.long_task = { id: f }), r;\n}\nconst ue = {\n  sendProfile: oe\n}, de = {\n  sampleIntervalMs: 10,\n  // Sample stack trace every 10ms\n  collectIntervalMs: 6e4,\n  // Collect data every minute\n  minProfileDurationMs: 5e3,\n  // Require at least 5 seconds of profile data to reduce noise and cost\n  minNumberOfSamples: 50\n  // Require at least 50 samples (~500 ms) to report a profile to reduce noise and cost\n};\nfunction pe(t, n, i, r, l = de) {\n  const f = q(Q.LONG_ANIMATION_FRAME);\n  let c;\n  const g = [];\n  let o = { state: \"stopped\" };\n  function _(e) {\n    o.state !== \"running\" && (c = e ? { startClocks: e.startClocks, viewId: e.id, viewName: e.name } : void 0, g.push(I(t, window, \"visibilitychange\", R).stop, I(t, window, \"beforeunload\", j).stop), p());\n  }\n  async function L() {\n    await T(\"stopped\"), g.forEach((e) => e()), O(m().relative), r.set({ status: \"stopped\", error_reason: void 0 });\n  }\n  function N(e) {\n    if (e.state === \"running\")\n      return {\n        cleanupTasks: e.cleanupTasks,\n        observer: e.observer\n      };\n    const s = [];\n    let a;\n    if (t.trackLongTasks) {\n      a = new PerformanceObserver(M), a.observe({\n        entryTypes: [A()]\n      });\n      const u = n.subscribe(12, (h) => {\n        re(h);\n      });\n      s.push(() => a == null ? void 0 : a.disconnect()), s.push(u.unsubscribe);\n    }\n    const d = n.subscribe(2, (u) => {\n      y({ viewId: u.id, viewName: u.name, startClocks: u.startClocks });\n    });\n    return s.push(d.unsubscribe), {\n      cleanupTasks: s,\n      observer: a\n    };\n  }\n  function p() {\n    const e = W().Profiler;\n    if (!e)\n      throw r.set({ status: \"error\", error_reason: \"not-supported-by-browser\" }), new Error(\"RUM Profiler is not supported in this browser.\");\n    k(o).catch(v);\n    const { cleanupTasks: s, observer: a } = N(o);\n    let d;\n    try {\n      d = new e({\n        sampleInterval: l.sampleIntervalMs,\n        // Keep buffer size at 1.5 times of minimum required to collect data for a profiling instance\n        maxBufferSize: Math.round(l.collectIntervalMs * 1.5 / l.sampleIntervalMs)\n      });\n    } catch (u) {\n      u instanceof Error && u.message.includes(\"disabled by Document Policy\") ? (X.warn(\"[DD_RUM] Profiler startup failed. Ensure your server includes the `Document-Policy: js-profiling` response header when serving HTML pages.\", u), r.set({ status: \"error\", error_reason: \"missing-document-policy-header\" })) : r.set({ status: \"error\", error_reason: \"unexpected-exception\" });\n      return;\n    }\n    r.set({ status: \"running\", error_reason: void 0 }), o = {\n      state: \"running\",\n      startClocks: m(),\n      profiler: d,\n      timeoutId: Y(p, l.collectIntervalMs),\n      longTasks: [],\n      views: [],\n      cleanupTasks: s,\n      observer: a\n    }, y(c), d.addEventListener(\"samplebufferfull\", w);\n  }\n  async function k(e) {\n    var s, a;\n    if (e.state !== \"running\")\n      return;\n    S((a = (s = e.observer) === null || s === void 0 ? void 0 : s.takeRecords()) !== null && a !== void 0 ? a : []), Z(e.timeoutId), e.profiler.removeEventListener(\"samplebufferfull\", w);\n    const { startClocks: d, longTasks: u, views: h } = e, C = m();\n    await e.profiler.stop().then((P) => {\n      const E = m(), G = u.length > 0, V = $(d.timeStamp, E.timeStamp) < l.minProfileDurationMs, J = te(P.samples) < l.minNumberOfSamples;\n      !G && (V || J) || (D(\n        // Enrich trace with time and instance data\n        Object.assign(P, {\n          startClocks: d,\n          endClocks: E,\n          clocksOrigin: x(),\n          longTasks: u,\n          views: h,\n          sampleInterval: l.sampleIntervalMs\n        })\n      ), O(C.relative));\n    }).catch(v);\n  }\n  async function T(e) {\n    o.state === \"running\" && (o.cleanupTasks.forEach((s) => s()), await k(o), o = { state: e });\n  }\n  function y(e) {\n    o.state !== \"running\" || !e || o.views.push(e);\n  }\n  function D(e) {\n    var s;\n    const a = (s = i.findTrackedSession()) === null || s === void 0 ? void 0 : s.id;\n    ue.sendProfile(e, t.profilingEndpointBuilder, t.applicationId, a).catch(v);\n  }\n  function w() {\n    p();\n  }\n  function M(e) {\n    S(e.getEntries());\n  }\n  function S(e) {\n    if (o.state === \"running\")\n      for (const s of e) {\n        if (s.duration < l.sampleIntervalMs)\n          continue;\n        const a = ee(s.startTime), d = se(a.relative);\n        o.longTasks.push({\n          id: d,\n          duration: s.duration,\n          entryType: s.entryType,\n          startClocks: a\n        });\n      }\n  }\n  function R() {\n    document.visibilityState === \"hidden\" && o.state === \"running\" ? T(\"paused\").catch(v) : document.visibilityState === \"visible\" && o.state === \"paused\" && p();\n  }\n  function j() {\n    p();\n  }\n  function A() {\n    return f ? \"long-animation-frame\" : \"longtask\";\n  }\n  function B() {\n    return o.state === \"stopped\";\n  }\n  function F() {\n    return o.state === \"running\";\n  }\n  function U() {\n    return o.state === \"paused\";\n  }\n  return { start: _, stop: L, isStopped: B, isRunning: F, isPaused: U };\n}\nexport {\n  de as DEFAULT_RUM_PROFILER_CONFIGURATION,\n  pe as createRumProfiler\n};\n//# sourceMappingURL=profiler.DLk5YRbt.js.map\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}}]
}